@model ShoeZilla.Models.User
@{
    ViewData["Title"] = "My Profile";
    var orders = ViewBag.Orders as List<ShoeZilla.Models.Order>;
}

<div class="container mt-5">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3">
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-body text-center p-4">
                    <div class="rounded-circle bg-dark text-white d-flex align-items-center justify-content-center mx-auto mb-3" style="width: 80px; height: 80px; font-size: 2rem;">
                         @Model.FullName.Substring(0, 1)
                    </div>
                    <h5 class="fw-bold">@Model.FullName</h5>
                    <p class="text-muted small">@Model.Email</p>
                </div>
            </div>

            <div class="list-group shadow-sm border-0">
                <a href="#profile" class="list-group-item list-group-item-action active border-0 py-3" data-bs-toggle="list">
                    <i class="bi bi-person me-2"></i> My Profile
                </a>
                <a href="#orders" class="list-group-item list-group-item-action border-0 py-3" data-bs-toggle="list">
                    <i class="bi bi-bag me-2"></i> My Orders
                </a>
                <a asp-controller="Account" asp-action="Logout" class="list-group-item list-group-item-action border-0 py-3 text-danger">
                    <i class="bi bi-box-arrow-right me-2"></i> Logout
                </a>
            </div>
        </div>

        <!-- Content -->
        <div class="col-md-9">
            <div class="tab-content">
                <!-- Profile Tab -->
                <div class="tab-pane fade show active" id="profile">
                    <div class="card shadow-sm border-0">
                        <div class="card-header bg-white border-0 py-3">
                            <h5 class="fw-bold mb-0">Profile Information</h5>
                        </div>
                        <div class="card-body p-4">
                            <form>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label text-muted">Full Name</label>
                                        <input type="text" class="form-control" value="@Model.FullName" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label text-muted">Email</label>
                                        <input type="text" class="form-control" value="@Model.Email" readonly>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label text-muted">Join Date</label>
                                        <input type="text" class="form-control" value="@Model.CreatedAt.ToShortDateString()" readonly>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Orders Tab -->
                <div class="tab-pane fade" id="orders">
                    <div class="card shadow-sm border-0">
                        <div class="card-header bg-white border-0 py-3">
                            <h5 class="fw-bold mb-0">Order History</h5>
                        </div>
                        <div class="card-body p-0">
                             @if (orders != null && orders.Any())
                             {
                                 <div class="table-responsive">
                                     <table class="table table-hover mb-0">
                                         <thead class="bg-light">
                                             <tr>
                                                 <th class="border-0 px-4 py-3">Order ID</th>
                                                 <th class="border-0 px-4 py-3">Date</th>
                                                 <th class="border-0 px-4 py-3">Status</th>
                                                 <th class="border-0 px-4 py-3">Total</th>
                                                 <th class="border-0 px-4 py-3">Action</th>
                                             </tr>
                                         </thead>
                                         <tbody>
                                             @foreach (var order in orders)
                                             {
                                                 <tr>
                                                     <td class="px-4 py-3">#@order.Id</td>
                                                     <td class="px-4 py-3">@order.OrderDate.ToShortDateString()</td>
                                                     <td class="px-4 py-3">
                                                         @if(order.Status == "Delivered") { <span class="badge bg-success">@order.Status</span> }
                                                         else if(order.Status == "Pending") { <span class="badge bg-warning text-dark">@order.Status</span> }
                                                         else if(order.Status == "Cancelled") { <span class="badge bg-danger">@order.Status</span> }
                                                         else { <span class="badge bg-info">@order.Status</span> }
                                                     </td>
                                                     <td class="px-4 py-3">$@order.TotalAmount</td>
                                                     <td class="px-4 py-3">
                                                         <a asp-controller="Checkout" asp-action="Confirmation" asp-route-id="@order.Id" class="btn btn-sm btn-outline-dark">View</a>
                                                     </td>
                                                 </tr>
                                             }
                                         </tbody>
                                     </table>
                                 </div>
                             }
                             else
                             {
                                 <div class="text-center p-5">
                                     <i class="bi bi-box-seam display-4 text-muted mb-3"></i>
                                     <p class="text-muted">No orders found.</p>
                                     <a asp-controller="Home" asp-action="Index" class="btn btn-dark">Start Shopping</a>
                                 </div>
                             }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
